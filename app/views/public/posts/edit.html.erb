<!---------- 投稿編集フォーム -------------->

<div class="container mt-4 align-imtes-center">
  <div class='bg-light mx-auto mb-5'>

  <%= form_with model: @post, local:true do |f| %>
    <div class="row">
      <div class="form-group mt-5 mx-auto">
        <%= f.text_field :title, placeholder: "投稿名", size: "90", class: 'py-2 px-2' %>
        <%= render 'layouts/error_messages', obj: @post, column: :title %>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6 col-lg-5 offset-lg-1 mt-3">
        <div class="form-group mt-4 ml-md-2">
          <%= f.text_area :introduction, placeholder: "説明", size:"50 x 4", class: 'p-2' %>
          <%= render 'layouts/error_messages', obj: @post, column: :introduction %>
        </div>
      </div>
      <div class="col-md-6 col-lg-5 mt-3 pl-4 pt-2">
        <div class="from-group mr-md-2 mt-3 ml-5 p-3 bg-white shadow-sm">
          <h6 class="mb-3"><i class="fas fa-camera font-color-pink mr-2"></i>写真をアップロード</h6>
          <%= f.attachment_field :post_image %>
          <%= render 'layouts/error_messages', obj: @post, column: :post_image %>
        </div>
      </div>
    </div>

    <tr class="form-group text-danger">
      <td style="width:25%" class="font-weight-bold text-danger">コメントステータス</td>
      <td>
        <%= f.radio_button :commentable, :false %>
        <%= f.label :commentable, "コメント不可", class:' text-danger' %>
        <%= f.radio_button :commentable, :true %>
        <%= f.label :commentable, "コメント許可", class:' text-danger' %>
      </td>
    </tr>

    <div class="ingredients">
      <div class="mx-auto">
        <%= f.fields_for :ingredients do |t| %>
          <%= render "public/posts/ingredient_fields", f: t %>
        <% end %>
      </div>
    </div>

    <div id="detail-association-insertion-point"></div>

    <div class="col-10 mx-auto mt-2">
      <%= link_to_add_association "+フォームを追加", f, :ingredients,
      class: "btn btn-secondary btn-block",
      data: {
      association_insertion_node: '#detail-association-insertion-point',
      association_insertion_method: 'after'
      }%>
    </div>

    <div class="row mt-4">
      <div class="form-inline mx-auto">
        <% if @post.is_draft == true %>
          <%= f.submit "投稿を公開", :name => 'publicize_draft', style: 'font-size: 20px', class: 'mr-5 btn btn-sm btn-warning' %>
          <%= f.submit "下書きを更新", :name => 'update_draft', style: 'font-size: 20px', class: 'mr-5 btn btn-sm btn-outline-secondary' %>
        <% else %>
          <%= f.submit "投稿を更新", :name => 'update_post', style: 'font-size: 20px', class: 'btn btn-sm btn-warning text-light' %>
        <% end %>
      </div>
    </div>
    <div class="mt-4 pb-3 text-center">
      <u><%= link_to "投稿を削除", "/posts/#{@post.id}", method: :delete, data: {confirm: "この投稿を削除しますか？"}, class: 'text-danger' %></u>
    </div>
    <%= f.hidden_field :user_id, :value => current_user.id %>
  <% end %>
  </div>
</div>